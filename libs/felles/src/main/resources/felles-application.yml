spring:
  kafka:
    bootstrap-servers: ${KAFKA_BROKERS}
    producer:
      acks: all
      batch-size: 1
      properties:
        max.blcock.ms: 2000
        enable.idempotence: true
    properties:
      basic.auth:
        credentials.source: USER_INFO
        user.info: ${KAFKA_SCHEMA_REGISTRY_USER}:${KAFKA_SCHEMA_REGISTRY_PASSWORD}
      schema.registry:
        url: ${KAFKA_SCHEMA_REGISTRY}
      security.protocol: SSL
      specific.avro.reader: true
      ssl:
        key.password: ${KAFKA_CREDSTORE_PASSWORD}
        keystore:
          location: ${KAFKA_KEYSTORE_PATH}
          password: ${KAFKA_CREDSTORE_PASSWORD}
          type: PKCS12
        truststore:
          type: JKS
          location: ${KAFKA_TRUSTSTORE_PATH}
          password: ${KAFKA_CREDSTORE_PASSWORD}
  jpa:
    hibernate.connection.provider_class: org.hibernate.hikaricp.internal.HikariCPConnectionProvider
    properties.hibernate.dialect: org.hibernate.dialect.PostgreSQLDialect
    database: postgresql
  datasource:
    type: com.zaxxer.hikari.HikariDataSource
    url: jdbc:postgresql://${DB_HOST}:${DB_PORT}/${DB_DATABASE}?user=${DB_USERNAME}&password=${DB_PASSWORD}
    hikari:
      idle-timeout: 10001
      max-lifetime: 30001
      connectionTimeout: 1000
      maximum-pool-size: 10
      minimum-idle: 1

url:
  pdl-api:
    base-url: ${APIGW_URL}
    graphql: "/pdl-api/graphql"
  sts:
    base-url: ${APIGW_URL}
    security-token-service: "/security-token-service/rest/v1/sts/token"

farskapsportal.felles.egenskaper:
  appnavn: ${APPNAVN}
  systembruker-brukernavn: srvfarskapsportal
  systembruker-passord: ${SRVFARSKAPSPORTAL_PWD}
  maks-antall-maaneder-etter-foedsel: 6
  kontroll-far-maks-antall-forsoek: 3
  url: ${FARSKAPSPORTAL_URL}
  brukernotifikasjon:
    grupperingsid-farskap: farskap
    skrudd-paa: ${BRUKERNOTIFIKASJON_PAA}
    topic-beskjed: min-side.aapen-brukernotifikasjon-beskjed-v1
    topic-ferdig: min-side.aapen-brukernotifikasjon-done-v1
    topic-oppgave: min-side.aapen-brukernotifikasjon-oppgave-v1
    synlighet-beskjed-antall-maaneder: 1
    levetid-oppgave-antall-dager: 40
    sikkerhetsnivaa-beskjed: 3
    sikkerhetsnivaa-oppgave: 3

---
spring:
  config.activate.on-profile: test

WIREMOCK_URL: http://localhost:8096

url:
  pdl-api.base-url: ${WIREMOCK_URL}
  sts.base-url: ${WIREMOCK_URL}

### misc
BRUKERNOTIFIKASJON_PAA: true
FARSKAPSPORTAL_URL: "https://farskapsportal.dev.nav.no"
KAFKA_TRUSTSTORE_PATH: classpath:cert/server-selfsigned.jks
KAFKA_CREDSTORE_PASSWORD: qwer1234
NAIS_CLUSTER_NAME: dev
SRVFARSKAPSPORTAL_PWD: top_hemmelig
APIKEY_PDLAPI_FP: keyForZoneCrossing
APIKEY_STS_FP: keyForZoneCrossing

### kafka
KAFKA_BROKERS: 127.0.0.1:9092
KAFKA_SCHEMA_REGISTRY: http://localhost:8081

spring.kafka.bootstrap-servers: localhost:9092
spring.kafka.consumer.group-id: farskapsportal
spring.kafka.consumer.auto-offset-reset: earliest


---
### H2 ###
spring:
  config.activate.on-profile: test
  flyway.enabled: false
  datasource.type: com.zaxxer.hikari.HikariDataSource
  datasource.url: jdbc:h2:mem:default
  h2.console.enabled: true
  jpa.hibernate.hbmddl-auto: create-drop
  jpa.properties.hibernate.dialect: org.hibernate.dialect.H2Dialect